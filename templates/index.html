{% extends "base.html" %}

{% block title %}Torneos{% endblock %}

{% block content %}

<h2>Lista de Torneos</h2>

<a href="{{ url_for('crear_torneo') }}">Nuevo Torneo</a>
<br><br>

<table>
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Fecha</th>
        <th>Lugar</th>
        <th>Equipos</th>
        <th>Acciones</th>
    </tr>

    {% for torneo in torneos %}
    <tr>
        <td>{{ torneo.id }}</td>
        <td>{{ torneo.nombre }}</td>
        <td>{{ torneo.fecha }}</td>
        <td>{{ torneo.lugar }}</td>
        <td>
            {% set equipos_torneo = equipos | selectattr("torneo_id", "equalto", torneo.id) | list %}
            {% if equipos_torneo %}
                <ul>
                    {% for equipo in equipos_torneo %}
                        <li>{{ equipo.nombre }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <em>No hay equipos</em>
            {% endif %}
        </td>
        <td>
            <a href="{{ url_for('editar_torneo', id=torneo.id) }}">Editar</a> |
            <a href="{{ url_for('eliminar_torneo', id=torneo.id) }}"
               onclick="return confirm('Â¿Eliminar torneo?')">Eliminar</a> |
            <a href="{{ url_for('ver_torneo', id=torneo.id) }}">Ver Equipos</a>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
